#!/usr/bin/env bash

NAME=$(basename "$0")
INSTALLDIR=$(which basename)
VERSION="1.0"
LICENSE="GNU GPLV3+"

usage()
{
    cat <<- EOF

 ================== LangitKetujuh Tools ==================

 license : $LICENSE
 usage   : $NAME [type]
 type    : [pro, lite, pro-musl, lite-musl]
 option  : $NAME -h,--help     # show this help
           $NAME -v,--version  # show $NAME version

 =========================================================

EOF
}

GITPRO="https://gitlab.com/langitketujuh/pro"
GITLITE="https://gitlab.com/langitketujuh/lite"
TMP="/tmp"
PRO="pro"
LITE="lite"

if [[ $UID != 0 ]]; then
    echo "Please run this script with sudo:"
    echo "sudo $NAME $*"
    exit 1
fi

for arg in "$@"; do
    case $arg in
        lite-musl)
            echo "1. Remove old tmp."
            rm -rf $TMP/$LITE
            echo "2. Remove old skeleton (.config)."
            rm -rf /etc/skel/.config
            echo "3. Clone GIT."
            git clone --depth 1 $GITLITE $TMP/$LITE
            cd $TMP/$LITE/musl
            echo "4. Copying update."
            cp -rf * /
            cd ~
            echo ">>>> Finish..."
            ;;
        lite-glibc)
            echo "1. Remove old tmp."
            rm -rf $TMP/$LITE
            echo "2. Remove old skeleton (.config)."
            rm -rf /etc/skel/.config
            echo "3. Clone GIT."
            git clone --depth 1 $GITLITE $TMP/$LITE
            cd $TMP/$LITE/glibc
            echo "4. Copying update."
            cp -rf * /
            cd ~
            echo ">>>> Finish..."
            ;;
        pro-musl)
            echo "1. Remove old tmp."
            rm -rf $TMP/$PRO
            echo "2. Remove old skeleton (.config)."
            rm -rf /etc/skel/.config
            echo "3. Clone GIT."
            git clone --depth 1 $GITLITE $TMP/$PRO
            cd $TMP/$PRO/musl
            echo "4. Copying update."
            cp -rf * /
            cd ~
            echo ">>>> Finish..."
            ;;
        pro-glibc)
            echo "1. Remove old tmp."
            rm -rf $TMP/$PRO
            echo "2. Remove old skeleton (.config)."
            rm -rf /etc/skel/.config
            echo "3. Clone GIT."
            git clone --depth 1 $GITLITE $TMP/$PRO
            cd $TMP/$PRO/glibc
            echo "4. Copying update."
            cp -rf * /
            cd ~
            echo ">>>> Finish..."
            ;;
        help)
            usage
            exit 0
            ;;
        version)
            echo "\033[1;33m $NAME\033[0m version $VERSION"
            exit 0
            ;;
        *)
            printf "\noption does not exist: %s\n\n" "$arg"
            exit 2
    esac
done
